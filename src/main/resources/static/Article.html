<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Articles</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header><a href="index.html">‚Üê Retour</a><h1>Articles</h1></header>
  <main class="container">
    <button id="refreshBtn">Charger les articles</button>

    <table id="articlesTable">
      <thead><tr><th>ID</th><th>Nom</th><th>Prix</th></tr></thead>
      <tbody></tbody>
    </table>

    <h3>Ajouter un article</h3>
    <form id="articleForm">
      <input name="nom" placeholder="Nom" required>
      <input name="prix" placeholder="Prix" type="number" step="0.01" required>
      <textarea name="description" placeholder="Description (optionnelle)"></textarea>
      <button type="submit">Ajouter</button>
    </form>
  </main>

  <script src="js/app.js"></script>
  <script>
    document.getElementById('refreshBtn').onclick = () => app.loadArticles();
    document.getElementById('articleForm').onsubmit = async (e) => {
      e.preventDefault();
      const form = e.target;
      const data = {
        nom: form.nom.value,
        prix: parseFloat(form.prix.value),
        description: form.description.value
      };
      await app.createArticle(data);
      form.reset();
      app.loadArticles();
    };
    document.addEventListener('DOMContentLoaded', () => app.loadArticles());
  </script>
</body>
</html>
